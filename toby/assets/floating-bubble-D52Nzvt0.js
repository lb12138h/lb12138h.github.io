import{r as c,w as O,R as o,P as F,o as $,Q as K,q as P,c as D,y as V,m as A,t as I,U as M}from"./index-DSfinKr5.js";import{t as _,u as B,L as k}from"./index-xpH2Vq7I.js";var j=function(e){c.useEffect(function(){e==null||e()},[])};function H(e){return c.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),c.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},c.createElement("g",null,c.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),c.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function S(e,n,u){if(e&&typeof MutationObserver<"u"){let a=new MutationObserver(()=>{u()});return a.observe(e,n),()=>{a&&(a.disconnect(),a=null)}}return()=>{}}const h="adm-collapse",T=()=>null,U=e=>{const{visible:n}=e,u=c.useRef(null),a=F(n,e.forceRender,e.destroyOnClose),[{height:f},d]=$(()=>({from:{height:0},config:{precision:.01,mass:1,tension:200,friction:25,clamp:!0}}));return j(()=>{if(!n)return;const t=u.current;t&&d.start({height:t.offsetHeight,immediate:!0})}),K(()=>{const t=u.current;if(t)if(n){let i=0,l=()=>{};const r=()=>{i+=1;const m=i;d.start({height:t.offsetHeight})[0].then(()=>{m===i&&l()})};return l=S(t,{childList:!0,subtree:!0},r),r(),l}else d.start({height:t.offsetHeight,immediate:!0}),d.start({height:0})},[n]),o.createElement(P.div,{className:D(`${h}-panel-content`,{[`${h}-panel-content-active`]:n}),style:{height:f.to(t=>f.idle&&n?"auto":t)}},o.createElement("div",{className:`${h}-panel-content-inner`,ref:u},o.createElement(k.Item,null,a&&e.children)))},X=e=>{const n=[];_(e.children,t=>{!c.isValidElement(t)||typeof t.key!="string"||n.push(t)});const u=()=>{var t;if(!e.accordion)return{value:e.activeKey,defaultValue:(t=e.defaultActiveKey)!==null&&t!==void 0?t:[],onChange:e.onChange};const i={value:[],defaultValue:[],onChange:l=>{var r,m;(r=e.onChange)===null||r===void 0||r.call(e,(m=l[0])!==null&&m!==void 0?m:null)}};return e.activeKey===void 0?i.value=void 0:e.activeKey!==null&&(i.value=[e.activeKey]),[null,void 0].includes(e.defaultActiveKey)||(i.defaultValue=[e.defaultActiveKey]),i},[a,f]=B(u()),d=a===null?[]:Array.isArray(a)?a:[a];return O(e,o.createElement("div",{className:h},o.createElement(k,null,n.map(t=>{const i=t.key,l=d.includes(i);function r(s){var v,g;e.accordion?f(l?[]:[i]):f(l?d.filter(y=>y!==i):[...d,i]),(g=(v=t.props).onClick)===null||g===void 0||g.call(v,s)}const m=()=>{let s=o.createElement(H,null);return e.arrow!==void 0&&(s=e.arrow),t.props.arrow!==void 0&&(s=t.props.arrow),typeof s=="function"?s(l):o.createElement("div",{className:D(`${h}-arrow`,{[`${h}-arrow-active`]:l})},s)};return o.createElement(o.Fragment,{key:i},O(t.props,o.createElement(k.Item,{className:`${h}-panel-header`,onClick:r,disabled:t.props.disabled,arrow:m()},t.props.title)),o.createElement(U,{visible:l,forceRender:!!t.props.forceRender,destroyOnClose:!!t.props.destroyOnClose},t.props.children))}))))},W=V(X,{Panel:T}),p="adm-floating-bubble",q={axis:"y",defaultOffset:{x:0,y:0}},Y=e=>{const n=A(q,e),u=c.useRef(null),a=c.useRef(null),[f,d]=c.useState(n.offset===void 0?n.defaultOffset:n.offset);c.useEffect(()=>{n.offset!==void 0&&r.start({x:n.offset.x,y:n.offset.y})},[n.offset]);const[{x:t,y:i,opacity:l},r]=$(()=>({x:f.x,y:f.y,opacity:1})),m=I(s=>{var v;let g=s.offset[0],y=s.offset[1];if(s.last&&n.magnetic){const L=u.current,N=a.current;if(!L||!N)return;const x=L.getBoundingClientRect(),E=N.getBoundingClientRect();if(n.magnetic==="x"){const b=t.goal-t.get(),C=E.left+b-x.left,w=x.right-(E.right+b);w<=C?g+=w:g-=C}else if(n.magnetic==="y"){const b=i.goal-i.get(),C=E.top+b-x.top,w=x.bottom-(E.bottom+b);w<=C?y+=w:y-=C}}const R={x:g,y};n.offset===void 0?r.start(R):d(R),(v=n.onOffsetChange)===null||v===void 0||v.call(n,R),r.start({opacity:s.active?.8:1})},{axis:n.axis==="xy"?void 0:n.axis,pointer:{touch:!0},filterTaps:!0,bounds:u,from:()=>[t.get(),i.get()]});return O(n,o.createElement("div",{className:p},o.createElement("div",{className:`${p}-boundary-outer`},o.createElement("div",{className:`${p}-boundary`,ref:u})),o.createElement(P.div,Object.assign({},m(),{style:{opacity:l,transform:M([t,i],(s,v)=>`translate(${s}px, ${v}px)`)},onClick:n.onClick,className:`${p}-button`,ref:a}),n.children)))};export{W as C,Y as F};
