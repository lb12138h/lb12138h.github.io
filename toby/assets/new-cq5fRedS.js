import{m as U,n as k,r as d,j as e,B as P,a6 as x,T as u,a3 as R}from"./index-DERllzhn.js";import{C as t}from"./index-BwC_fqYy.js";import{F as l,I as r}from"./input-Clf9kwip.js";import{S as i}from"./switch-DvbpWlb6.js";import{T as s}from"./text-area-iB4A7Wm-.js";import"./index-hSoGQ23Z.js";const h={enabled:!0,singleUrl:!0,enabledCookieJar:!1,sourceGroup:"♋🈲🖇️待分类,",enableJs:!0,loadWithBaseUrl:!0},F=()=>{const b=U(),{id:o}=k(),[a]=l.useForm(),[I,p]=d.useState(!1),f=async c=>{console.log("values",c),await x.rule.put(Object.keys(c).reduce((n,g)=>{const j=g,m=c[j];return(m||m!==void 0&&m!=="")&&(n[j]=m),n},{})).then(()=>{u.show({icon:"success",content:"成功!"}),a.resetFields(),b(-1)}).catch(n=>{u.show({icon:"fail",content:n.message})}),p(!1)};return d.useEffect(()=>{(async()=>{if(o){const n=await x.rule.get(R(o));if(n){a.resetFields(),a.setFieldsValue(n);return}}a.resetFields(),a.setFieldsValue(h)})()},[a,o]),d.useEffect(()=>{},[]),e.jsx(l,{name:"form",form:a,onFinish:f,initialValues:h,footer:e.jsx(P,{block:!0,type:"submit",color:"primary",loading:I,children:"提交"}),children:e.jsxs(t,{children:[e.jsxs(t.Panel,{forceRender:!0,title:"类型",children:[e.jsx(l.Item,{name:"enabled",label:"启用",valuePropName:"checked",rules:[{required:!0}],children:e.jsx(i,{})}),e.jsx(l.Item,{name:"singleUrl",label:"单 URL",valuePropName:"checked",rules:[{required:!0}],children:e.jsx(i,{})}),e.jsx(l.Item,{name:"enabledCookieJar",label:"CookieJar",valuePropName:"checked",rules:[{required:!0}],children:e.jsx(i,{})})]},"type"),e.jsxs(t.Panel,{forceRender:!0,title:"基本",children:[e.jsx(l.Item,{name:"sourceName",label:"源名称",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(l.Item,{name:"sourceUrl",label:"源 URL",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(l.Item,{name:"sourceIcon",label:"图标",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"sourceGroup",label:"源分组 ♋🈲🖇️",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"sourceComment",label:"源注释",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"sortUrl",label:"分类 URL",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"loginUrl",label:"登录 URL",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"loginUi",label:"登录 UI",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"loginCheckJs",label:"登录检查 JS",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"coverDecodeJs",label:"封面解密",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"header",label:"请求头",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"variableComment",label:"变量说明",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"concurrentRate",label:"并发率",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"jsLib",label:"jsLib",children:e.jsx(s,{})})]},"base"),e.jsxs(t.Panel,{forceRender:!0,title:"列表",children:[e.jsx(l.Item,{name:"ruleArticles",label:"列表规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"ruleNextPage",label:"列表下一页规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"ruleTitle",label:"标题规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"rulePubDate",label:"时间规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"ruleDescription",label:"描述规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"ruleImage",label:"图片URL规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"ruleLink",label:"链接规则",children:e.jsx(s,{})})]},"list"),e.jsxs(t.Panel,{forceRender:!0,title:"WEB_VIEW",children:[e.jsx(l.Item,{name:"enableJs",label:"启用 JavaScript",valuePropName:"checked",children:e.jsx(i,{})}),e.jsx(l.Item,{name:"loadWithBaseUrl",label:"加载 BaseUrl",valuePropName:"checked",children:e.jsx(i,{})}),e.jsx(l.Item,{name:"ruleContent",label:"内容规则",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"style",label:"样式",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"injectJs",label:"注入Js",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"contentWhitelist",label:"白名单",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"contentBlacklist",label:"黑名单",children:e.jsx(s,{})}),e.jsx(l.Item,{name:"shouldOverrideUrlLoading",label:"url跳转拦截",children:e.jsx(s,{})})]},"WEB_VIEW"),e.jsxs(t.Panel,{forceRender:!0,title:"未知",children:[e.jsx(l.Item,{name:"articleStyle",label:"样式",children:e.jsx(r,{type:"number",step:1,min:0})}),e.jsx(l.Item,{name:"customOrder",label:"自定义排序",children:e.jsx(r,{type:"number",step:1,min:0})})]},"unknown")]})})};export{F as default};
