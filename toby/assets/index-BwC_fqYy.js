import{r as u,G as O,F as P,w,R as s,aa as R,k as C,ab as F,f as K,h as N,i as I,l as x}from"./index-DERllzhn.js";import{u as M,t as A,a as V}from"./input-Clf9kwip.js";import{L as g}from"./index-hSoGQ23Z.js";var $=function(n){u.useEffect(function(){n==null||n()},[])};function D(n){return u.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n,{style:Object.assign({verticalAlign:"-0.125em"},n.style),className:["antd-mobile-icon",n.className].filter(Boolean).join(" ")}),u.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},u.createElement("g",null,u.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),u.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function E(n,i,e){if(n&&typeof MutationObserver<"u"){let l=new MutationObserver(()=>{e()});return l.observe(n,i),()=>{l&&(l.disconnect(),l=null)}}return()=>{}}function G(n,i,e){const l=M(n);u.useEffect(()=>E(i.current,e,l),[i])}const m="adm-collapse",_=()=>null,j=n=>{const{visible:i}=n,e=u.useRef(null),l=F(i,n.forceRender,n.destroyOnClose),[{height:v},a]=K(()=>({from:{height:0},config:{precision:.01,mass:1,tension:200,friction:25,clamp:!0}}));return $(()=>{if(!i)return;const r=e.current;r&&a.start({height:r.offsetHeight,immediate:!0})}),N(()=>{const r=e.current;if(r)if(i){let d=0,t=()=>{};const o=()=>{d+=1;const c=d;a.start({height:r.offsetHeight})[0].then(()=>{c===d&&t()})};return t=E(r,{childList:!0,subtree:!0},o),o(),t}else a.start({height:r.offsetHeight,immediate:!0}),a.start({height:0})},[i]),s.createElement(I.div,{className:C(`${m}-panel-content`,{[`${m}-panel-content-active`]:i}),style:{height:v.to(r=>v.idle&&i?"auto":r)}},s.createElement("div",{className:`${m}-panel-content-inner`,ref:e},s.createElement(g.Item,null,l&&n.children)))},H=n=>{const{collapse:i={}}=O(),e=P(i,n),l=[];A(e.children,t=>{!u.isValidElement(t)||typeof t.key!="string"||l.push(t)});const v=()=>{var t;if(!e.accordion)return{value:e.activeKey,defaultValue:(t=e.defaultActiveKey)!==null&&t!==void 0?t:[],onChange:e.onChange};const o={value:[],defaultValue:[],onChange:c=>{var h,f;(h=e.onChange)===null||h===void 0||h.call(e,(f=c[0])!==null&&f!==void 0?f:null)}};return e.activeKey===void 0?o.value=void 0:e.activeKey!==null&&(o.value=[e.activeKey]),[null,void 0].includes(e.defaultActiveKey)||(o.defaultValue=[e.defaultActiveKey]),o},[a,r]=V(v()),d=a===null?[]:Array.isArray(a)?a:[a];return w(e,s.createElement("div",{className:m},s.createElement(g,null,l.map(t=>{const o=t.key,c=d.includes(o);function h(k){var y,p;e.accordion?r(c?[]:[o]):r(c?d.filter(L=>L!==o):[...d,o]),(p=(y=t.props).onClick)===null||p===void 0||p.call(y,k)}const f=R(s.createElement(D,null),e.arrow,e.arrowIcon,t.props.arrow,t.props.arrowIcon),b=typeof f=="function"?f(c):s.createElement("div",{className:C(`${m}-arrow`,{[`${m}-arrow-active`]:c})},f);return s.createElement(s.Fragment,{key:o},w(t.props,s.createElement(g.Item,{className:`${m}-panel-header`,onClick:h,disabled:t.props.disabled,arrowIcon:b},t.props.title)),s.createElement(j,{visible:c,forceRender:!!t.props.forceRender,destroyOnClose:!!t.props.destroyOnClose},t.props.children))}))))},T=x(H,{Panel:_});export{T as C,G as u};
