import{r as f,m as y,A as F,R as T,w as G}from"./index-DzDdqEaD.js";import{u as P,f as M}from"./input-B_Q_oDlI.js";var D;(function(e){e[e.HIGH_SURROGATE_START=55296]="HIGH_SURROGATE_START",e[e.HIGH_SURROGATE_END=56319]="HIGH_SURROGATE_END",e[e.LOW_SURROGATE_START=56320]="LOW_SURROGATE_START",e[e.REGIONAL_INDICATOR_START=127462]="REGIONAL_INDICATOR_START",e[e.REGIONAL_INDICATOR_END=127487]="REGIONAL_INDICATOR_END",e[e.FITZPATRICK_MODIFIER_START=127995]="FITZPATRICK_MODIFIER_START",e[e.FITZPATRICK_MODIFIER_END=127999]="FITZPATRICK_MODIFIER_END",e[e.VARIATION_MODIFIER_START=65024]="VARIATION_MODIFIER_START",e[e.VARIATION_MODIFIER_END=65039]="VARIATION_MODIFIER_END",e[e.DIACRITICAL_MARKS_START=8400]="DIACRITICAL_MARKS_START",e[e.DIACRITICAL_MARKS_END=8447]="DIACRITICAL_MARKS_END",e[e.SUBDIVISION_INDICATOR_START=127988]="SUBDIVISION_INDICATOR_START",e[e.TAGS_START=917504]="TAGS_START",e[e.TAGS_END=917631]="TAGS_END",e[e.ZWJ=8205]="ZWJ"})(D||(D={}));const b=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);var x;function S(e){if(typeof e!="string")throw new TypeError("string cannot be undefined or null");const r=[];let t=0,n=0;for(;t<e.length;)n+=H(t+n,e),Z(e[t+n])&&n++,U(e[t+n])&&n++,B(e[t+n])&&n++,$(e[t+n])?n++:(r.push(e.substring(t,t+n)),t+=n,n=0);return r}function H(e,r){const t=r[e];if(!K(t)||e===r.length-1)return 1;const n=t+r[e+1];let u=r.substring(e+2,e+5);return g(n)&&g(u)?4:L(n)&&j(u)?r.slice(e).indexOf(String.fromCodePoint(917631))+2:V(u)?4:2}function K(e){return e&&c(e[0].charCodeAt(0),55296,56319)}function g(e){return c(E(e),127462,127487)}function L(e){return c(E(e),127988,127988)}function V(e){return c(E(e),127995,127999)}function U(e){return typeof e=="string"&&c(e.charCodeAt(0),65024,65039)}function B(e){return typeof e=="string"&&c(e.charCodeAt(0),8400,8447)}function j(e){const r=e.codePointAt(0);return typeof e=="string"&&typeof r=="number"&&c(r,917504,917631)}function Z(e){return typeof e=="string"&&b.includes(e.charCodeAt(0))}function $(e){return typeof e=="string"&&e.charCodeAt(0)===8205}function E(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536}function c(e,r,t){return e>=r&&e<=t}(function(e){e[e.unit_1=1]="unit_1",e[e.unit_2=2]="unit_2",e[e.unit_4=4]="unit_4"})(x||(x={}));const A="adm-text-area",v={rows:2,showCount:!1,autoSize:!1,defaultValue:""},W=f.forwardRef((e,r)=>{const t=y(v,e),{autoSize:n,showCount:u,maxLength:l}=t,[I,d]=P(Object.assign(Object.assign({},t),{value:t.value===null?"":t.value}));t.value;const i=f.useRef(null),h=f.useRef("auto"),O=f.useRef(null),N=M({onEnterPress:t.onEnterPress,onKeyDown:t.onKeyDown,nativeInputRef:i,enterKeyHint:t.enterKeyHint});f.useImperativeHandle(r,()=>({clear:()=>{d("")},focus:()=>{var o;(o=i.current)===null||o===void 0||o.focus()},blur:()=>{var o;(o=i.current)===null||o===void 0||o.blur()},get nativeElement(){return i.current}})),F(()=>{if(!n)return;const o=i.current,a=O.current;if(!o||(o.style.height=h.current,!a))return;let s=a.scrollHeight;if(typeof n=="object"){const w=window.getComputedStyle(o),C=parseFloat(w.lineHeight);n.minRows&&(s=Math.max(s,n.minRows*C)),n.maxRows&&(s=Math.min(s,n.maxRows*C))}h.current=`${s}px`,o.style.height=`${s}px`},[I,n]);const _=f.useRef(!1);let m;const p=S(I).length;typeof u=="function"?m=u(p,l):u&&(m=T.createElement("div",{className:`${A}-count`},l===void 0?p:p+"/"+l));let R=t.rows;return typeof n=="object"&&(n.maxRows&&R>n.maxRows&&(R=n.maxRows),n.minRows&&R<n.minRows&&(R=n.minRows)),G(t,T.createElement("div",{className:A},T.createElement("textarea",{ref:i,className:`${A}-element`,rows:R,value:I,placeholder:t.placeholder,onChange:o=>{let a=o.target.value;l&&!_.current&&(a=S(a).slice(0,l).join("")),d(a)},id:t.id,onCompositionStart:o=>{var a;_.current=!0,(a=t.onCompositionStart)===null||a===void 0||a.call(t,o)},onCompositionEnd:o=>{var a;if(_.current=!1,l){const s=o.target.value;d(S(s).slice(0,l).join(""))}(a=t.onCompositionEnd)===null||a===void 0||a.call(t,o)},autoComplete:t.autoComplete,autoFocus:t.autoFocus,disabled:t.disabled,readOnly:t.readOnly,name:t.name,onFocus:t.onFocus,onBlur:t.onBlur,onClick:t.onClick,onKeyDown:N}),m,n&&T.createElement("textarea",{ref:O,className:`${A}-element ${A}-element-hidden`,value:I,rows:R,"aria-hidden":!0,readOnly:!0})))});W.defaultProps=v;export{W as T};
