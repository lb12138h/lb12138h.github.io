import{P as X,_ as H,r as w,Q as Y,U,V as G,R as v,m as $,w as W,t as tt}from"./index-DTRIon_s.js";import{t as M}from"./dexie-react-hooks-DvDLujsZ.js";import{a as et,g as z,i as nt}from"./input-xzuf9X7x.js";import{a as rt,u as ot}from"./index-C7hdw2RV.js";(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function e(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch{return null}}var o=function(t){for(var n=t,r=e(n);r;)n=r.ownerDocument,r=e(n);return n}(window.document),i=[],s=null,h=null;function T(t){this.time=t.time,this.target=t.target,this.rootBounds=g(t.rootBounds),this.boundingClientRect=g(t.boundingClientRect),this.intersectionRect=g(t.intersectionRect||p()),this.isIntersecting=!!t.intersectionRect;var n=this.boundingClientRect,r=n.width*n.height,a=this.intersectionRect,u=a.width*a.height;r?this.intersectionRatio=Number((u/r).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function l(t,n){var r=n||{};if(typeof t!="function")throw new Error("callback must be a function");if(r.root&&r.root.nodeType!=1&&r.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=E(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}l.prototype.THROTTLE_TIMEOUT=100,l.prototype.POLL_INTERVAL=null,l.prototype.USE_MUTATION_OBSERVER=!0,l._setupCrossOriginUpdater=function(){return s||(s=function(t,n){!t||!n?h=p():h=I(t,n),i.forEach(function(r){r._checkForIntersections()})}),s},l._resetCrossOriginUpdater=function(){s=null,h=null},l.prototype.observe=function(t){var n=this._observationTargets.some(function(r){return r.element==t});if(!n){if(!(t&&t.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},l.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(n){return n.element!=t}),this._unmonitorIntersections(t.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},l.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},l.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},l.prototype._initThresholds=function(t){var n=t||[0];return Array.isArray(n)||(n=[n]),n.sort().filter(function(r,a,u){if(typeof r!="number"||isNaN(r)||r<0||r>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return r!==u[a-1]})},l.prototype._parseRootMargin=function(t){var n=t||"0px",r=n.split(/\s+/).map(function(a){var u=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!u)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(u[1]),unit:u[2]}});return r[1]=r[1]||r[0],r[2]=r[2]||r[0],r[3]=r[3]||r[1],r},l.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&this._monitoringDocuments.indexOf(t)==-1){var r=this._checkForIntersections,a=null,u=null;this.POLL_INTERVAL?a=n.setInterval(r,this.POLL_INTERVAL):(O(n,"resize",r,!0),O(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(u=new n.MutationObserver(r),u.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push(function(){var _=t.defaultView;_&&(a&&_.clearInterval(a),A(_,"resize",r,!0)),A(t,"scroll",r,!0),u&&u.disconnect()});var m=this.root&&(this.root.ownerDocument||this.root)||o;if(t!=m){var d=e(t);d&&this._monitorIntersections(d.ownerDocument)}}},l.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(n!=-1){var r=this.root&&(this.root.ownerDocument||this.root)||o,a=this._observationTargets.some(function(d){var _=d.element.ownerDocument;if(_==t)return!0;for(;_&&_!=r;){var y=e(_);if(_=y&&y.ownerDocument,_==t)return!0}return!1});if(!a){var u=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),u(),t!=r){var m=e(t);m&&this._unmonitorIntersections(m.ownerDocument)}}}},l.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var n=0;n<t.length;n++)t[n]()},l.prototype._checkForIntersections=function(){if(!(!this.root&&s&&!h)){var t=this._rootIsInDom(),n=t?this._getRootRect():p();this._observationTargets.forEach(function(r){var a=r.element,u=b(a),m=this._rootContainsTarget(a),d=r.entry,_=t&&m&&this._computeTargetAndRootIntersection(a,u,n),y=null;this._rootContainsTarget(a)?(!s||this.root)&&(y=n):y=p();var S=r.entry=new T({time:D(),target:a,boundingClientRect:u,rootBounds:y,intersectionRect:_});d?t&&m?this._hasCrossedThreshold(d,S)&&this._queuedEntries.push(S):d&&d.isIntersecting&&this._queuedEntries.push(S):this._queuedEntries.push(S)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},l.prototype._computeTargetAndRootIntersection=function(t,n,r){if(window.getComputedStyle(t).display!="none"){for(var a=n,u=f(t),m=!1;!m&&u;){var d=null,_=u.nodeType==1?window.getComputedStyle(u):{};if(_.display=="none")return null;if(u==this.root||u.nodeType==9)if(m=!0,u==this.root||u==o)s&&!this.root?!h||h.width==0&&h.height==0?(u=null,d=null,a=null):d=h:d=r;else{var y=f(u),S=y&&b(y),k=y&&this._computeTargetAndRootIntersection(y,S,r);S&&k?(u=y,d=I(S,k)):(u=null,a=null)}else{var B=u.ownerDocument;u!=B.body&&u!=B.documentElement&&_.overflow!="visible"&&(d=b(u))}if(d&&(a=x(d,a)),!a)break;u=u&&f(u)}return a}},l.prototype._getRootRect=function(){var t;if(this.root&&!R(this.root))t=b(this.root);else{var n=R(this.root)?this.root:o,r=n.documentElement,a=n.body;t={top:0,left:0,right:r.clientWidth||a.clientWidth,width:r.clientWidth||a.clientWidth,bottom:r.clientHeight||a.clientHeight,height:r.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(t)},l.prototype._expandRectByRootMargin=function(t){var n=this._rootMarginValues.map(function(a,u){return a.unit=="px"?a.value:a.value*(u%2?t.width:t.height)/100}),r={top:t.top-n[0],right:t.right+n[1],bottom:t.bottom+n[2],left:t.left-n[3]};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},l.prototype._hasCrossedThreshold=function(t,n){var r=t&&t.isIntersecting?t.intersectionRatio||0:-1,a=n.isIntersecting?n.intersectionRatio||0:-1;if(r!==a)for(var u=0;u<this.thresholds.length;u++){var m=this.thresholds[u];if(m==r||m==a||m<r!=m<a)return!0}},l.prototype._rootIsInDom=function(){return!this.root||c(o,this.root)},l.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||o;return c(n,t)&&(!this.root||n==t.ownerDocument)},l.prototype._registerInstance=function(){i.indexOf(this)<0&&i.push(this)},l.prototype._unregisterInstance=function(){var t=i.indexOf(this);t!=-1&&i.splice(t,1)};function D(){return window.performance&&performance.now&&performance.now()}function E(t,n){var r=null;return function(){r||(r=setTimeout(function(){t(),r=null},n))}}function O(t,n,r,a){typeof t.addEventListener=="function"?t.addEventListener(n,r,a):typeof t.attachEvent=="function"&&t.attachEvent("on"+n,r)}function A(t,n,r,a){typeof t.removeEventListener=="function"?t.removeEventListener(n,r,a):typeof t.detachEvent=="function"&&t.detachEvent("on"+n,r)}function x(t,n){var r=Math.max(t.top,n.top),a=Math.min(t.bottom,n.bottom),u=Math.max(t.left,n.left),m=Math.min(t.right,n.right),d=m-u,_=a-r;return d>=0&&_>=0&&{top:r,bottom:a,left:u,right:m,width:d,height:_}||null}function b(t){var n;try{n=t.getBoundingClientRect()}catch{}return n?(n.width&&n.height||(n={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.right-n.left,height:n.bottom-n.top}),n):p()}function p(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function g(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function I(t,n){var r=n.top-t.top,a=n.left-t.left;return{top:r,left:a,height:n.height,width:n.width,bottom:r+n.height,right:a+n.width}}function c(t,n){for(var r=n;r;){if(r==t)return!0;r=f(r)}return!1}function f(t){var n=t.parentNode;return t.nodeType==9&&t!=o?e(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&n.nodeType==11&&n.host?n.host:n)}function R(t){return t&&t.nodeType===9}window.IntersectionObserver=l,window.IntersectionObserverEntry=T})();function it(e,o){var i={},s=i.callback,h=X(i,["callback"]),T=H(w.useState(),2),l=T[0],D=T[1],E=H(w.useState(),2),O=E[0],A=E[1];return et(function(){var x=Array.isArray(e)?e:[e],b=x.map(function(g){return z(g)}).filter(Boolean);if(b.length){var p=new IntersectionObserver(function(g){var I,c;try{for(var f=Y(g),R=f.next();!R.done;R=f.next()){var t=R.value;A(t.intersectionRatio),D(t.isIntersecting),s==null||s(t)}}catch(n){I={error:n}}finally{try{R&&!R.done&&(c=f.return)&&c.call(f)}finally{if(I)throw I.error}}},U(U({},h),{root:z(void 0)}));return b.forEach(function(g){return p.observe(g)}),function(){p.disconnect()}}},[void 0,void 0,s],e),[l,O]}var V={},st=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(V,"__esModule",{value:!0});var q=V.staged=void 0;const at=st(w);function J(e){return typeof e=="function"?at.default.createElement(ut,{stage:e}):e}function ut(e){const o=e.stage();return J(o)}function lt(e){return function(i,s){const h=e(i,s);return J(h)}}q=V.staged=lt;const ct=e=>{const o=w.useRef(null),[i]=it(o);return w.useEffect(()=>{i&&e.onActive()},[i]),v.createElement("div",{ref:o})},ft=()=>v.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M41.396 6.234c1.923 0 3.487 1.574 3.487 3.505v29.14c0 1.937-1.568 3.51-3.491 3.51H6.604c-1.923 0-3.487-1.573-3.487-3.51V9.745c0-1.936 1.564-3.51 3.487-3.51Zm0 2.847H6.604c-.355 0-.654.3-.654.658V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.405 2.405 0 0 1 1.933.752l4.182 4.525 7.58-11.005a2.374 2.374 0 0 1 1.96-1.01c.79 0 1.532.38 1.966 1.01L42.05 34.89V9.74a.664.664 0 0 0-.654-.658Zm-28.305 2.763a3.119 3.119 0 0 1 3.117 3.117 3.119 3.119 0 0 1-3.117 3.117 3.122 3.122 0 0 1-3.117-3.117 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"})),ht=()=>v.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M19.233 6.233 17.42 9.08l-10.817.001a.665.665 0 0 0-.647.562l-.007.096V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.415 2.415 0 0 1 1.807.625l.126.127 4.182 4.525 2.267-3.292 5.461 7.841-4.065 7.375H6.604c-1.86 0-3.382-1.47-3.482-3.317l-.005-.192V9.744c0-1.872 1.461-3.405 3.296-3.505l.19-.005h12.63Zm22.163 0c1.86 0 3.382 1.472 3.482 3.314l.005.192v29.14a3.507 3.507 0 0 1-3.3 3.505l-.191.006H27.789l3.63-6.587.06-.119a1.87 1.87 0 0 0-.163-1.853l-6.928-9.949 3.047-4.422a2.374 2.374 0 0 1 1.96-1.01 2.4 2.4 0 0 1 1.86.87l.106.14L42.05 34.89V9.74a.664.664 0 0 0-.654-.658H21.855l1.812-2.848h17.73Zm-28.305 5.611c.794 0 1.52.298 2.07.788l-.843 1.325-.067.114a1.87 1.87 0 0 0 .11 1.959l.848 1.217c-.556.515-1.3.83-2.118.83a3.122 3.122 0 0 1-3.117-3.116 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"})),F="adm-image",dt={fit:"fill",placeholder:v.createElement("div",{className:`${F}-tip`},v.createElement(ft,null)),fallback:v.createElement("div",{className:`${F}-tip`},v.createElement(ht,null)),lazy:!1,draggable:!1},St=q(e=>{const o=$(dt,e),[i,s]=w.useState(!1),[h,T]=w.useState(!1),l=w.useRef(null),D=w.useRef(null);let E=o.src,O=o.srcSet;const[A,x]=w.useState(!o.lazy);E=A?o.src:void 0,O=A?o.srcSet:void 0,rt(()=>{s(!1),T(!1)},[E]),w.useEffect(()=>{var g;!((g=D.current)===null||g===void 0)&&g.complete&&s(!0)},[]);function b(){if(h)return v.createElement(v.Fragment,null,o.fallback);const g=v.createElement("img",{ref:D,id:o.id,className:`${F}-img`,src:E,alt:o.alt,onClick:o.onClick,onLoad:I=>{var c;s(!0),(c=o.onLoad)===null||c===void 0||c.call(o,I)},onError:I=>{var c;T(!0),(c=o.onError)===null||c===void 0||c.call(o,I)},style:{objectFit:o.fit,display:i?"block":"none"},crossOrigin:o.crossOrigin,decoding:o.decoding,loading:o.loading,referrerPolicy:o.referrerPolicy,sizes:o.sizes,srcSet:O,useMap:o.useMap,draggable:o.draggable});return v.createElement(v.Fragment,null,!i&&o.placeholder,g)}const p={};return o.width&&(p["--width"]=M(o.width),p.width=M(o.width)),o.height&&(p["--height"]=M(o.height),p.height=M(o.height)),W(o,v.createElement("div",{ref:l,className:F,style:p,onClick:o.onContainerClick},o.lazy&&!A&&v.createElement(ct,{onActive:()=>{x(!0)}}),b()))});var K;(function(e){e[e.HIGH_SURROGATE_START=55296]="HIGH_SURROGATE_START",e[e.HIGH_SURROGATE_END=56319]="HIGH_SURROGATE_END",e[e.LOW_SURROGATE_START=56320]="LOW_SURROGATE_START",e[e.REGIONAL_INDICATOR_START=127462]="REGIONAL_INDICATOR_START",e[e.REGIONAL_INDICATOR_END=127487]="REGIONAL_INDICATOR_END",e[e.FITZPATRICK_MODIFIER_START=127995]="FITZPATRICK_MODIFIER_START",e[e.FITZPATRICK_MODIFIER_END=127999]="FITZPATRICK_MODIFIER_END",e[e.VARIATION_MODIFIER_START=65024]="VARIATION_MODIFIER_START",e[e.VARIATION_MODIFIER_END=65039]="VARIATION_MODIFIER_END",e[e.DIACRITICAL_MARKS_START=8400]="DIACRITICAL_MARKS_START",e[e.DIACRITICAL_MARKS_END=8447]="DIACRITICAL_MARKS_END",e[e.SUBDIVISION_INDICATOR_START=127988]="SUBDIVISION_INDICATOR_START",e[e.TAGS_START=917504]="TAGS_START",e[e.TAGS_END=917631]="TAGS_END",e[e.ZWJ=8205]="ZWJ"})(K||(K={}));const vt=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);var j;function L(e){if(typeof e!="string")throw new TypeError("string cannot be undefined or null");const o=[];let i=0,s=0;for(;i<e.length;)s+=gt(i+s,e),Tt(e[i+s])&&s++,It(e[i+s])&&s++,Rt(e[i+s])&&s++,Et(e[i+s])?s++:(o.push(e.substring(i,i+s)),i+=s,s=0);return o}function gt(e,o){const i=o[e];if(!pt(i)||e===o.length-1)return 1;const s=i+o[e+1];let h=o.substring(e+2,e+5);return Z(s)&&Z(h)?4:mt(s)&&wt(h)?o.slice(e).indexOf(String.fromCodePoint(917631))+2:_t(h)?4:2}function pt(e){return e&&C(e[0].charCodeAt(0),55296,56319)}function Z(e){return C(P(e),127462,127487)}function mt(e){return C(P(e),127988,127988)}function _t(e){return C(P(e),127995,127999)}function It(e){return typeof e=="string"&&C(e.charCodeAt(0),65024,65039)}function Rt(e){return typeof e=="string"&&C(e.charCodeAt(0),8400,8447)}function wt(e){const o=e.codePointAt(0);return typeof e=="string"&&typeof o=="number"&&C(o,917504,917631)}function Tt(e){return typeof e=="string"&&vt.includes(e.charCodeAt(0))}function Et(e){return typeof e=="string"&&e.charCodeAt(0)===8205}function P(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536}function C(e,o,i){return e>=o&&e<=i}(function(e){e[e.unit_1=1]="unit_1",e[e.unit_2=2]="unit_2",e[e.unit_4=4]="unit_4"})(j||(j={}));const N="adm-text-area",Q={rows:2,showCount:!1,autoSize:!1,defaultValue:""},bt=w.forwardRef((e,o)=>{const i=$(Q,e),{autoSize:s,showCount:h,maxLength:T}=i,[l,D]=ot(Object.assign(Object.assign({},i),{value:i.value===null?"":i.value}));i.value;const E=w.useRef(null),O=w.useRef("auto"),A=w.useRef(null),x=nt({onEnterPress:i.onEnterPress,onKeyDown:i.onKeyDown,nativeInputRef:E,enterKeyHint:i.enterKeyHint});w.useImperativeHandle(o,()=>({clear:()=>{D("")},focus:()=>{var c;(c=E.current)===null||c===void 0||c.focus()},blur:()=>{var c;(c=E.current)===null||c===void 0||c.blur()},get nativeElement(){return E.current}})),tt(()=>{if(!s)return;const c=E.current,f=A.current;if(!c||(c.style.height=O.current,!f))return;let R=f.scrollHeight;if(typeof s=="object"){const t=window.getComputedStyle(c),n=parseFloat(t.lineHeight);s.minRows&&(R=Math.max(R,s.minRows*n)),s.maxRows&&(R=Math.min(R,s.maxRows*n))}O.current=`${R}px`,c.style.height=`${R}px`},[l,s]);const b=w.useRef(!1);let p;const g=L(l).length;typeof h=="function"?p=h(g,T):h&&(p=v.createElement("div",{className:`${N}-count`},T===void 0?g:g+"/"+T));let I=i.rows;return typeof s=="object"&&(s.maxRows&&I>s.maxRows&&(I=s.maxRows),s.minRows&&I<s.minRows&&(I=s.minRows)),W(i,v.createElement("div",{className:N},v.createElement("textarea",{ref:E,className:`${N}-element`,rows:I,value:l,placeholder:i.placeholder,onChange:c=>{let f=c.target.value;T&&!b.current&&(f=L(f).slice(0,T).join("")),D(f)},id:i.id,onCompositionStart:c=>{var f;b.current=!0,(f=i.onCompositionStart)===null||f===void 0||f.call(i,c)},onCompositionEnd:c=>{var f;if(b.current=!1,T){const R=c.target.value;D(L(R).slice(0,T).join(""))}(f=i.onCompositionEnd)===null||f===void 0||f.call(i,c)},autoComplete:i.autoComplete,autoFocus:i.autoFocus,disabled:i.disabled,readOnly:i.readOnly,name:i.name,onFocus:i.onFocus,onBlur:i.onBlur,onClick:i.onClick,onKeyDown:x}),p,s&&v.createElement("textarea",{ref:A,className:`${N}-element ${N}-element-hidden`,value:l,rows:I,"aria-hidden":!0,readOnly:!0})))});bt.defaultProps=Q;export{St as I,bt as T};
