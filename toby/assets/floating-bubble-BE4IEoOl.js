import{r as d,_ as F,o as O,R as f,x as D,y as $,z as K,A as _,q as P,E as A,m as M,F as B,G as I}from"./index-h-8rQXwW.js";import{t as S,u as T,L}from"./input-lqMVfNre.js";var j=function(e){d.useEffect(function(){e==null||e()},[])};function H(e,n){e===void 0&&(e=!1);var l=F(d.useState(e),2),o=l[0],i=l[1],c=d.useMemo(function(){var t=!e,r=function(){return i(function(s){return s===e?t:e})},a=function(s){return i(s)},u=function(){return i(e)},m=function(){return i(t)};return{toggle:r,set:a,setLeft:u,setRight:m}},[]);return[o,c]}function Z(e){e===void 0&&(e=!1);var n=F(H(!!e),2),l=n[0],o=n[1],i=o.toggle,c=o.set,t=d.useMemo(function(){var r=function(){return c(!0)},a=function(){return c(!1)};return{toggle:i,set:function(u){return c(!!u)},setTrue:r,setFalse:a}},[]);return[l,t]}function V(e){return d.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),d.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},d.createElement("g",null,d.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),d.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function z(e,n,l){if(e&&typeof MutationObserver<"u"){let o=new MutationObserver(()=>{l()});return o.observe(e,n),()=>{o&&(o.disconnect(),o=null)}}return()=>{}}const h="adm-collapse",X=()=>null,q=e=>{const{visible:n}=e,l=d.useRef(null),o=D(n,e.forceRender,e.destroyOnClose),[{height:i},c]=$(()=>({from:{height:0},config:{precision:.01,mass:1,tension:200,friction:25,clamp:!0}}));return j(()=>{if(!n)return;const t=l.current;t&&c.start({height:t.offsetHeight,immediate:!0})}),K(()=>{const t=l.current;if(t)if(n){let r=0,a=()=>{};const u=()=>{r+=1;const m=r;c.start({height:t.offsetHeight})[0].then(()=>{m===r&&a()})};return a=z(t,{childList:!0,subtree:!0},u),u(),a}else c.start({height:t.offsetHeight,immediate:!0}),c.start({height:0})},[n]),f.createElement(_.div,{className:P(`${h}-panel-content`,{[`${h}-panel-content-active`]:n}),style:{height:i.to(t=>i.idle&&n?"auto":t)}},f.createElement("div",{className:`${h}-panel-content-inner`,ref:l},f.createElement(L.Item,null,o&&e.children)))},G=e=>{const n=[];S(e.children,t=>{!d.isValidElement(t)||typeof t.key!="string"||n.push(t)});const l=()=>{var t;if(!e.accordion)return{value:e.activeKey,defaultValue:(t=e.defaultActiveKey)!==null&&t!==void 0?t:[],onChange:e.onChange};const r={value:[],defaultValue:[],onChange:a=>{var u,m;(u=e.onChange)===null||u===void 0||u.call(e,(m=a[0])!==null&&m!==void 0?m:null)}};return e.activeKey===void 0?r.value=void 0:e.activeKey!==null&&(r.value=[e.activeKey]),[null,void 0].includes(e.defaultActiveKey)||(r.defaultValue=[e.defaultActiveKey]),r},[o,i]=T(l()),c=o===null?[]:Array.isArray(o)?o:[o];return O(e,f.createElement("div",{className:h},f.createElement(L,null,n.map(t=>{const r=t.key,a=c.includes(r);function u(s){var v,g;e.accordion?i(a?[]:[r]):i(a?c.filter(y=>y!==r):[...c,r]),(g=(v=t.props).onClick)===null||g===void 0||g.call(v,s)}const m=()=>{let s=f.createElement(V,null);return e.arrow!==void 0&&(s=e.arrow),t.props.arrow!==void 0&&(s=t.props.arrow),typeof s=="function"?s(a):f.createElement("div",{className:P(`${h}-arrow`,{[`${h}-arrow-active`]:a})},s)};return f.createElement(f.Fragment,{key:r},O(t.props,f.createElement(L.Item,{className:`${h}-panel-header`,onClick:u,disabled:t.props.disabled,arrow:m()},t.props.title)),f.createElement(q,{visible:a,forceRender:!!t.props.forceRender,destroyOnClose:!!t.props.destroyOnClose},t.props.children))}))))},J=A(G,{Panel:X}),R="adm-floating-bubble",U={axis:"y",defaultOffset:{x:0,y:0}},Q=e=>{const n=M(U,e),l=d.useRef(null),o=d.useRef(null),[i,c]=d.useState(n.offset===void 0?n.defaultOffset:n.offset);d.useEffect(()=>{n.offset!==void 0&&u.start({x:n.offset.x,y:n.offset.y})},[n.offset]);const[{x:t,y:r,opacity:a},u]=$(()=>({x:i.x,y:i.y,opacity:1})),m=B(s=>{var v;let g=s.offset[0],y=s.offset[1];if(s.last&&n.magnetic){const k=l.current,N=o.current;if(!k||!N)return;const x=k.getBoundingClientRect(),E=N.getBoundingClientRect();if(n.magnetic==="x"){const b=t.goal-t.get(),C=E.left+b-x.left,w=x.right-(E.right+b);w<=C?g+=w:g-=C}else if(n.magnetic==="y"){const b=r.goal-r.get(),C=E.top+b-x.top,w=x.bottom-(E.bottom+b);w<=C?y+=w:y-=C}}const p={x:g,y};n.offset===void 0?u.start(p):c(p),(v=n.onOffsetChange)===null||v===void 0||v.call(n,p),u.start({opacity:s.active?.8:1})},{axis:n.axis==="xy"?void 0:n.axis,pointer:{touch:!0},filterTaps:!0,bounds:l,from:()=>[t.get(),r.get()]});return O(n,f.createElement("div",{className:R},f.createElement("div",{className:`${R}-boundary-outer`},f.createElement("div",{className:`${R}-boundary`,ref:l})),f.createElement(_.div,Object.assign({},m(),{style:{opacity:a,transform:I([t,r],(s,v)=>`translate(${s}px, ${v}px)`)},onClick:n.onClick,className:`${R}-button`,ref:o}),n.children)))};export{J as C,Q as F,Z as u};
