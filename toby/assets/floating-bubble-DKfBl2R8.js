import{r as u,d as F,H as D,G as P,w as k,R as d,I as M,l as $,J as A,h as I,i as B,k as K,m as S,K as T,L as j}from"./index-ossK1LZ4.js";import{u as H,t as V,a as z,L as N}from"./input-CrX-0v2G.js";var X=function(t){u.useEffect(function(){t==null||t()},[])};function G(t,e){t===void 0&&(t=!1);var n=F(u.useState(t),2),i=n[0],f=n[1],a=u.useMemo(function(){var s=!t,l=function(){return f(function(c){return c===t?s:t})},o=function(c){return f(c)},r=function(){return f(t)},m=function(){return f(s)};return{toggle:l,set:o,setLeft:r,setRight:m}},[]);return[i,a]}function ee(t){t===void 0&&(t=!1);var e=F(G(!!t),2),n=e[0],i=e[1],f=i.toggle,a=i.set,s=u.useMemo(function(){var l=function(){return a(!0)},o=function(){return a(!1)};return{toggle:f,set:function(r){return a(!!r)},setTrue:l,setFalse:o}},[]);return[n,s]}function J(t){return u.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),u.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},u.createElement("g",null,u.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),u.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function _(t,e,n){if(t&&typeof MutationObserver<"u"){let i=new MutationObserver(()=>{n()});return i.observe(t,e),()=>{i&&(i.disconnect(),i=null)}}return()=>{}}function te(t,e,n){const i=H(t);u.useEffect(()=>_(e.current,n,i),[e])}const g="adm-collapse",U=()=>null,W=t=>{const{visible:e}=t,n=u.useRef(null),i=A(e,t.forceRender,t.destroyOnClose),[{height:f},a]=I(()=>({from:{height:0},config:{precision:.01,mass:1,tension:200,friction:25,clamp:!0}}));return X(()=>{if(!e)return;const s=n.current;s&&a.start({height:s.offsetHeight,immediate:!0})}),B(()=>{const s=n.current;if(s)if(e){let l=0,o=()=>{};const r=()=>{l+=1;const m=l;a.start({height:s.offsetHeight})[0].then(()=>{m===l&&o()})};return o=_(s,{childList:!0,subtree:!0},r),r(),o}else a.start({height:s.offsetHeight,immediate:!0}),a.start({height:0})},[e]),d.createElement(K.div,{className:$(`${g}-panel-content`,{[`${g}-panel-content-active`]:e}),style:{height:f.to(s=>f.idle&&e?"auto":s)}},d.createElement("div",{className:`${g}-panel-content-inner`,ref:n},d.createElement(N.Item,null,i&&t.children)))},Y=t=>{const{collapse:e={}}=D(),n=P(e,t),i=[];V(n.children,o=>{!u.isValidElement(o)||typeof o.key!="string"||i.push(o)});const f=()=>{var o;if(!n.accordion)return{value:n.activeKey,defaultValue:(o=n.defaultActiveKey)!==null&&o!==void 0?o:[],onChange:n.onChange};const r={value:[],defaultValue:[],onChange:m=>{var c,v;(c=n.onChange)===null||c===void 0||c.call(n,(v=m[0])!==null&&v!==void 0?v:null)}};return n.activeKey===void 0?r.value=void 0:n.activeKey!==null&&(r.value=[n.activeKey]),[null,void 0].includes(n.defaultActiveKey)||(r.defaultValue=[n.defaultActiveKey]),r},[a,s]=z(f()),l=a===null?[]:Array.isArray(a)?a:[a];return k(n,d.createElement("div",{className:g},d.createElement(N,null,i.map(o=>{const r=o.key,m=l.includes(r);function c(b){var p,h;n.accordion?s(m?[]:[r]):s(m?l.filter(E=>E!==r):[...l,r]),(h=(p=o.props).onClick)===null||h===void 0||h.call(p,b)}const v=M(d.createElement(J,null),n.arrow,n.arrowIcon,o.props.arrow,o.props.arrowIcon),y=typeof v=="function"?v(m):d.createElement("div",{className:$(`${g}-arrow`,{[`${g}-arrow-active`]:m})},v);return d.createElement(d.Fragment,{key:r},k(o.props,d.createElement(N.Item,{className:`${g}-panel-header`,onClick:c,disabled:o.props.disabled,arrowIcon:y},o.props.title)),d.createElement(W,{visible:m,forceRender:!!o.props.forceRender,destroyOnClose:!!o.props.destroyOnClose},o.props.children))}))))},ne=S(Y,{Panel:U}),L="adm-floating-bubble",Z={axis:"y",defaultOffset:{x:0,y:0}},oe=t=>{const e=P(Z,t),n=u.useRef(null),i=u.useRef(null),[f,a]=u.useState(e.offset===void 0?e.defaultOffset:e.offset);u.useEffect(()=>{e.offset!==void 0&&r.start({x:e.offset.x,y:e.offset.y})},[e.offset]);const[{x:s,y:l,opacity:o},r]=I(()=>({x:f.x,y:f.y,opacity:1})),m=T(c=>{var v;let y=c.offset[0],b=c.offset[1];if(c.last&&e.magnetic){const h=n.current,E=i.current;if(!h||!E)return;const R=h.getBoundingClientRect(),O=E.getBoundingClientRect();if(e.magnetic==="x"){const C=s.goal-s.get(),w=O.left+C-R.left,x=R.right-(O.right+C);x<=w?y+=x:y-=w}else if(e.magnetic==="y"){const C=l.goal-l.get(),w=O.top+C-R.top,x=R.bottom-(O.bottom+C);x<=w?b+=x:b-=w}}const p={x:y,y:b};e.offset===void 0?r.start(p):a(p),(v=e.onOffsetChange)===null||v===void 0||v.call(e,p),r.start({opacity:c.active?.8:1})},{axis:e.axis==="xy"?void 0:e.axis,pointer:{touch:!0},filterTaps:!0,bounds:n,from:()=>[s.get(),l.get()]});return k(e,d.createElement("div",{className:L},d.createElement("div",{className:`${L}-boundary-outer`},d.createElement("div",{className:`${L}-boundary`,ref:n})),d.createElement(K.div,Object.assign({},m(),{style:{opacity:o,transform:j([s,l],(c,v)=>`translate(${c}px, ${v}px)`)},onClick:e.onClick,className:`${L}-button`,ref:i}),e.children)))};export{ne as C,oe as F,ee as a,te as u};
