import{m as g,n as E,r as u,j as e,B as v,a0 as k,T as S,a3 as w,a4 as L}from"./index-DERllzhn.js";import{C as o}from"./index-BwC_fqYy.js";import{F as l,I as j}from"./input-Clf9kwip.js";import{S as P}from"./selector-DpT9G-B8.js";import{S as h}from"./switch-DvbpWlb6.js";import{T as r}from"./text-area-iB4A7Wm-.js";import"./index-hSoGQ23Z.js";import"./space-bauQVJ63.js";const B=[{label:"æ–‡æœ¬",value:0},{label:"éŸ³é¢‘",value:1},{label:"å›¾ç‰‡",value:2},{label:"æ–‡ä»¶",value:3}],b={bookSourceType:0,enabled:!0,enabledExplore:!0,enabledCookieJar:!1,bookSourceGroup:"â™‹ğŸˆ²ğŸ–‡ï¸ğŸ“™,"},K=()=>{const U=g(),{id:d}=E(),[c]=l.useForm(),[I,p]=u.useState(b),[y,C]=u.useState(!1),R=async n=>{const m=Object.keys(n).reduce((a,x)=>{const i=x,s=n[i];if(s||s===!1||s===0)if(i.includes(".")){const t=i.split(".");a[t[0]]||(a[t[0]]={}),a[t[0]][t[1]]=s}else a[i]=s;return a},{});await k.rule.put(m).then(()=>{S.show({icon:"success",content:"æˆåŠŸ!"}),c.resetFields(),U(-1)}).catch(a=>{S.show({icon:"fail",content:a.message})}),C(!1)};return u.useEffect(()=>{(async()=>{if(d){const m=await k.rule.get(w(d));if(m){const a=Object.keys(m).reduce((x,i)=>{const s=i,t=m[s];return L(t)?Object.keys(t).forEach(f=>{const T=f;x[`${s}.${f}`]=t[T]}):x[s]=t,x},{});p(a),c.resetFields(),c.setFieldsValue(a);return}}p(b),c.resetFields(),c.setFieldsValue(b)})()},[c,d]),u.useEffect(()=>{},[]),e.jsx("div",{children:I&&e.jsx(l,{name:"form",form:c,onFinish:R,initialValues:I,footer:e.jsx(v,{block:!0,type:"submit",color:"primary",loading:y,children:"æäº¤"}),children:e.jsxs(o,{defaultActiveKey:["type","base"],children:[e.jsxs(o.Panel,{forceRender:!0,title:"ç±»å‹",children:[e.jsx(l.Item,{name:"bookSourceType",label:"ç±»å‹",getValueProps:n=>({value:[n]}),normalize:n=>Array.isArray(n)&&n.length===1?n[0]:void 0,rules:[{required:!0}],children:e.jsx(P,{style:{"--border-radius":"100px","--border":"solid transparent 1px","--checked-border":"solid var(--adm-color-primary) 1px","--padding":"8px 24px"},showCheckMark:!1,options:B})}),e.jsx(l.Item,{name:"enabled",label:"å¯ç”¨",valuePropName:"checked",rules:[{required:!0}],children:e.jsx(h,{})}),e.jsx(l.Item,{name:"enabledExplore",label:"å‘ç°",valuePropName:"checked",rules:[{required:!0}],children:e.jsx(h,{})}),e.jsx(l.Item,{name:"enabledCookieJar",label:"CookieJar",valuePropName:"checked",rules:[{required:!0}],children:e.jsx(h,{})})]},"type"),e.jsxs(o.Panel,{forceRender:!0,title:"åŸºæœ¬",children:[e.jsx(l.Item,{name:"bookSourceUrl",label:"æº URL",rules:[{required:!0}],children:e.jsx(j,{})}),e.jsx(l.Item,{name:"bookSourceName",label:"æºåç§°",rules:[{required:!0}],children:e.jsx(j,{})}),e.jsx(l.Item,{name:"bookSourceGroup",label:"æºåˆ†ç»„ â™‹ğŸˆ²ğŸ–‡ï¸ğŸ“™ğŸ¶ğŸ“½ï¸ğŸ§©ğŸˆµ",children:e.jsx(j,{})}),e.jsx(l.Item,{name:"bookSourceComment",label:"æºæ³¨é‡Š",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"loginUrl",label:"ç™»å½• URL",children:e.jsx(j,{})}),e.jsx(l.Item,{name:"loginUi",label:"ç™»å½• UI",children:e.jsx(j,{})}),e.jsx(l.Item,{name:"loginCheckJs",label:"ç™»å½•æ£€æŸ¥ JS",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"coverDecodeJs",label:"å°é¢è§£å¯†",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"bookUrlPattern",label:"ä¹¦ç± URL æ­£åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"header",label:"è¯·æ±‚å¤´",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"variableComment",label:"å˜é‡è¯´æ˜",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"concurrentRate",label:"å¹¶å‘ç‡",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"jsLib",label:"jsLib",children:e.jsx(r,{})})]},"base"),e.jsxs(o.Panel,{forceRender:!0,title:"æœç´¢",children:[e.jsx(l.Item,{name:"searchUrl",label:"æœç´¢åœ°å€",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.bookList",label:"ä¹¦ç±åˆ—è¡¨è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.checkKeyWord",label:"æ ¡éªŒå…³é”®å­—",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.name",label:"ä¹¦åè§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.author",label:"ä½œè€…è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.kind",label:"åˆ†ç±»è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.wordCount",label:"å­—æ•°è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.lastChapter",label:"æœ€æ–°ç« èŠ‚è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.intro",label:"ç®€ä»‹è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.coverUrl",label:"å°é¢è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleSearch.bookUrl",label:"è¯¦æƒ…é¡µ URL è§„åˆ™",children:e.jsx(r,{})})]},"search"),e.jsxs(o.Panel,{forceRender:!0,title:"å‘ç°",children:[e.jsx(l.Item,{name:"exploreUrl",label:"å‘ç°åœ°å€è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.bookList",label:"ä¹¦ç±åˆ—è¡¨è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.name",label:"ä¹¦åè§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.author",label:"ä½œè€…è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.kind",label:"åˆ†ç±»è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.wordCount",label:"å­—æ•°è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.lastChapter",label:"æœ€æ–°ç« èŠ‚è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.intro",label:"ç®€ä»‹è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.coverUrl",label:"å°é¢è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleExplore.bookUrl",label:"è¯¦æƒ…é¡µ URL è§„åˆ™",children:e.jsx(r,{})})]},"explore"),e.jsxs(o.Panel,{forceRender:!0,title:"è¯¦æƒ…",children:[e.jsx(l.Item,{name:"ruleBookInfo.init",label:"é¢„å¤„ç†è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.name",label:"ä¹¦åè§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.author",label:"ä½œè€…è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.kind",label:"åˆ†ç±»è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.wordCount",label:"å­—æ•°è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.lastChapter",label:"æœ€æ–°ç« èŠ‚è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.intro",label:"ç®€ä»‹è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.coverUrl",label:"å°é¢è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.tocUrl",label:"ç›®å½• URL è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleBookInfo.canReName",label:"å…è®¸ä¿®æ”¹ä¹¦åä½œè€…",children:e.jsx(r,{placeholder:"å­—ç¬¦ä¸²true/false"})}),e.jsx(l.Item,{name:"ruleBookInfo.downloadUrls",label:"ä¸‹è½½URLè§„åˆ™",children:e.jsx(r,{})})]},"info"),e.jsxs(o.Panel,{forceRender:!0,title:"ç›®å½•",children:[e.jsx(l.Item,{name:"ruleToc.preUpdateJs",label:"æ›´æ–°ä¹‹å‰ JS",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.chapterList",label:"ç›®å½•åˆ—è¡¨è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.chapterName",label:"ç« èŠ‚åç§°è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.chapterUrl",label:"ç« èŠ‚ URL è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.formatJs",label:"æ ¼å¼åŒ–è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.isVolume",label:"Volumeæ ‡è¯†",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.updateTime",label:"æ›´æ–°æ—¶é—´",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.isVip",label:"VIP æ ‡è¯†",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.isPay",label:"è´­ä¹°æ ‡è¯†",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleToc.nextTocUrl",label:"ç›®å½•ä¸‹ä¸€é¡µè§„åˆ™",children:e.jsx(r,{})})]},"toc"),e.jsxs(o.Panel,{forceRender:!0,title:"æ­£æ–‡",children:[e.jsx(l.Item,{name:"ruleContent.content",label:"æ­£æ–‡è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.title",label:"ç« èŠ‚åç§°è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.nextContentUrl",label:"ç›®å½•ä¸‹ä¸€é¡µè§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.webJs",label:"WebView JS",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.sourceRegex",label:"èµ„æºæ­£åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.replaceRegex",label:"æ›¿æ¢è§„åˆ™",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.imageStyle",label:"å›¾ç‰‡æ ·å¼",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.imageDecode",label:"å›¾ç‰‡è§£å¯†",children:e.jsx(r,{})}),e.jsx(l.Item,{name:"ruleContent.payAction",label:"è´­ä¹°æ“ä½œ",children:e.jsx(r,{})})]},"content")]})})})};export{K as default};
