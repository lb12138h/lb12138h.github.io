"use strict";(self.webpackChunkapps_ant_admin=self.webpackChunkapps_ant_admin||[]).push([[964],{86760:function(Y,p,e){var D=e(73193),a=e.n(D),T=e(31499),m=e(44194),w=e(31549),l=function(s){var f=s.modalVisible,u=s.children;return(0,w.jsx)(T.Z,a()(a()({destroyOnClose:!0,title:"\u65B0\u5EFA",width:"80vw",open:f,footer:null},s),{},{children:u}))};p.Z=l},40747:function(Y,p,e){var D=e(90819),a=e.n(D),T=e(89933),m=e.n(T),w=e(45332),l=e.n(w),E=e(44194),s=function(u){var X=(0,E.useState)(!1),$=l()(X,2),O=$[0],C=$[1];return(0,E.useEffect)(function(){var z=function(){var y=m()(a()().mark(function W(){return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return C(!0),R.next=3,u();case 3:C(!1);case 4:case"end":return R.stop()}},W)}));return function(){return y.apply(this,arguments)}}();z()},[]),[O]};p.Z=s},60942:function(Y,p,e){var D=e(15717),a=e(34712),T=e(44194),m=function(){var l=(0,a.yR)(function(){return D.q.tag.orderBy("order").toArray()},[]),E=(0,a.yR)(function(){return D.q.group.orderBy("order").toArray()},[]),s=(0,T.useMemo)(function(){return E==null?void 0:E.map(function(f){return{title:f.title,value:"group-"+f.id,disabled:!0,children:l==null?void 0:l.filter(function(u){return u.group===f.id}).map(function(u){return{title:u.title,value:u.id}})}}).filter(function(f){var u;return(u=f.children)===null||u===void 0?void 0:u.length})},[l,E]);return{webTagList:l,webTagGroupList:E,webTagDb:D.q,tagSelectOptions:s}};p.Z=m},62118:function(Y,p,e){e.r(p);var D=e(45332),a=e.n(D),T=e(90819),m=e.n(T),w=e(89933),l=e.n(w),E=e(86760),s=e(56181),f=e(40747),u=e(60942),X=e(92171),$=e(87306),O=e(84940),C=e(70538),z=e(11379),y=e(51192),W=e(71626),x=e(48249),R=e(82083),H=e(6475),q=e(19821),ee=e(34712),d=e(44194),_=e(31549),I=function(){var i=l()(m()().mark(function K(L){var c;return m()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return c=y.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),b.prev=1,b.next=4,s.X.web.put(L);case 4:return c(),y.ZP.success("\u6DFB\u52A0\u6210\u529F"),b.abrupt("return",!0);case 9:return b.prev=9,b.t0=b.catch(1),c(),y.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),b.abrupt("return",!1);case 14:case"end":return b.stop()}},K,null,[[1,9]])}));return function(L){return i.apply(this,arguments)}}(),V=function(){var K=(0,f.Z)(function(){return s.X.getCloudData()}),L=a()(K,1),c=L[0],j=(0,ee.yR)(function(){return s.X.web.toArray()},[]),b=(0,u.Z)(),_e=b.tagSelectOptions,M=(0,d.useState)(!1),A=a()(M,2),B=A[0],v=A[1],g=(0,d.useState)(),U=a()(g,2),S=U[0],P=U[1],J=function(o){P(o),v(!0)};(0,d.useEffect)(function(){B||P(void 0)},[B]);var Q=(0,d.useState)(!1),Z=a()(Q,2),ne=Z[0],n=Z[1],be=function(o){n(o.target.checked)},me=(0,d.useState)(!1),oe=a()(me,2),re=oe[0],Ee=oe[1],ce=function(o){Ee(o.target.checked)},fe=(0,d.useState)(),se=a()(fe,2),k=se[0],ue=se[1],te=(0,d.useRef)(),ae=[{title:"id",dataIndex:"id",hideInTable:!0,hideInSearch:!0,formItemProps:{hidden:!0},fieldProps:{disabled:!0}},{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]},render:function(o,r){return(0,_.jsx)("span",{className:"cursor-pointer",onClick:function(){return(0,z.ZK)(r.url)},children:r.title})}},{title:"\u526F\u6807\u9898",dataIndex:"subTitle",hideInSearch:!0},{title:"\u7F51\u5740",dataIndex:"url",formItemProps:{rules:[{required:!0,message:"\u7F51\u5740\u4E3A\u5FC5\u586B\u9879"}]},render:function(o,r){return(0,_.jsx)(W.Z.Text,{copyable:{text:r.url},children:r.url})}},{title:"tags",dataIndex:"tags",valueType:"treeSelect",fieldProps:{treeData:_e,multiple:!0,showSearch:!0,rules:[{required:!0,message:"tags\u5FC5\u586B\u9879"}]},render:function(o,r){return(0,_.jsx)(X.Z,{data:r,disabled:!ne})}},{title:"\u5907\u6CE8",dataIndex:"remark",valueType:"textarea"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",fixed:re?"right":!1,width:"160px",render:function(o,r){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("a",{href:r.url,target:"_black",rel:"noreferrer",children:"\u8DF3\u8F6C"}),(0,_.jsx)(x.Z,{type:"vertical"}),(0,_.jsx)("a",{onClick:function(){return J(r)},children:"\u7F16\u8F91"}),(0,_.jsx)(x.Z,{type:"vertical"}),(0,_.jsx)("a",{onClick:function(){return ue(r)},children:"\u8BE6\u60C5"})]})}}],ve=(0,d.useState)({}),le=a()(ve,2),N=le[0],de=le[1],he=(0,d.useState)([]),ie=a()(he,2),De=ie[0],Pe=ie[1];return(0,d.useEffect)(function(){var t=j||[],o=Object.keys(N);o.length&&o.forEach(function(r){switch(r){case"title":t=t.filter(function(h){var F;return h.title.includes(N[r]||"")||((F=h.subTitle)===null||F===void 0?void 0:F.includes(N[r]||""))});break;case"url":t=t.filter(function(h){return h.url.includes(N[r]||"")});break;case"tags":t=t.filter(function(h){var F=N[r];return F?F.every(function(G){return h.tags.includes(G)}):!0});break;default:break}}),Pe(t)},[j,N]),(0,_.jsxs)($._z,{children:[(0,_.jsx)(O.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:te,rowKey:"id",search:{labelWidth:80},scroll:{x:"max-content"},toolBarRender:function(){return[(0,_.jsx)(R.ZP,{type:"primary",onClick:function(){return v(!0)},loading:c,children:"\u65B0\u5EFA"},"1"),(0,_.jsx)(H.Z,{checked:ne,onChange:be,children:"tag"}),(0,_.jsx)(H.Z,{checked:re,onChange:ce,children:"\u64CD\u4F5C"})]},options:{fullScreen:!0,reload:!1},dataSource:De,columns:ae,onSubmit:de,onReset:function(){return de({})}},"".concat(re)),(0,_.jsx)(E.Z,{title:S&&"\u7F16\u8F91 - ".concat(S.id),onCancel:function(){return v(!1)},modalVisible:B,children:(0,_.jsx)(O.Z,{onSubmit:function(){var t=l()(m()().mark(function o(r){var h;return m()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,I(r);case 2:h=G.sent,h&&(v(!1),te.current&&te.current.reload());case 4:case"end":return G.stop()}},o)}));return function(o){return t.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:ae,form:{initialValues:S}})}),(0,_.jsx)(q.Z,{width:600,open:!!k,onClose:function(){ue(void 0)},closable:!0,children:k&&(0,_.jsx)(C.vY,{column:2,title:k.title,request:l()(m()().mark(function t(){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{data:k||{}});case 1:case"end":return r.stop()}},t)})),params:{id:k==null?void 0:k.id},columns:ae})})]})};p.default=V},92171:function(Y,p,e){var D=e(90819),a=e.n(D),T=e(89933),m=e.n(T),w=e(45332),l=e.n(w),E=e(73193),s=e.n(E),f=e(85045),u=e.n(f),X=e(64776),$=e(15717),O=e(92259),C=e(88251),z=e(33697),y=e(32942),W=e(44194),x=e(31549),R={cursor:"move",transition:"unset"},H=function(d){var _=d.tag,I=(0,C.nB)({id:_.id}),V=I.listeners,i=I.transform,K=I.transition,L=I.isDragging,c=I.setNodeRef,j=i?s()(s()({},R),{},{transform:"translate3d(".concat(i.x,"px, ").concat(i.y,"px, 0)"),transition:L?"unset":K}):R;return(0,x.jsx)(z.Z,s()(s()({style:j,ref:c},V),{},{children:_.text}))},q=function(d){var _=d.data,I=d.disabled,V=_.tags,i=V===void 0?[]:V,K=(0,W.useState)([{id:1,text:"Tag 1"},{id:2,text:"Tag 2"},{id:3,text:"Tag 3"}]),L=l()(K,2),c=L[0],j=L[1];(0,W.useEffect)(function(){var M=function(){var A=m()(a()().mark(function B(){var v,g,U,S,P,J,Q,Z;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:v=[],g=!1,U=!1,n.prev=3,P=u()(i);case 5:return n.next=7,P.next();case 7:if(!(g=!(J=n.sent).done)){n.next=16;break}return Q=J.value,n.next=11,$.q.tag.get(Q);case 11:Z=n.sent,Z&&v.push({id:Z.id,text:Z.title});case 13:g=!1,n.next=5;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(3),U=!0,S=n.t0;case 22:if(n.prev=22,n.prev=23,!(g&&P.return!=null)){n.next=27;break}return n.next=27,P.return();case 27:if(n.prev=27,!U){n.next=30;break}throw S;case 30:return n.finish(27);case 31:return n.finish(22);case 32:j(v);case 33:case"end":return n.stop()}},B,null,[[3,18,22,32],[23,,27,31]])}));return function(){return A.apply(this,arguments)}}();M()},[i]);var b=(0,O.Dy)((0,O.VT)(O.we)),_e=function(A){var B=A.active,v=A.over;v&&B.id!==v.id&&j(function(g){var U=g.findIndex(function(P){return P.id===B.id}),S=g.findIndex(function(P){return P.id===v.id});return(0,C.Rp)(g,U,S)})};return(0,W.useEffect)(function(){if((i==null?void 0:i.length)===c.length){var M=c.map(function(A){return A.id});M.join()!==i.join()&&X.O.web.update(_.id,{tags:M})}},[c,i,_]),(0,x.jsx)(O.LB,{sensors:b,onDragEnd:_e,collisionDetection:O.pE,children:(0,x.jsx)(C.Fo,{disabled:I,items:c,strategy:C.PG,children:(0,x.jsx)(y.Z,{gap:"4px 0",wrap:!0,children:c.map(function(M){return(0,x.jsx)(H,{tag:M},M.id)})})})})};p.Z=q}}]);
