"use strict";(self.webpackChunkapps_ant_admin=self.webpackChunkapps_ant_admin||[]).push([[978],{11836:function(le,R,e){e.d(R,{Z:function(){return c}});var b=e(90819),g=e.n(b),Z=e(89933),L=e.n(Z),N=e(45332),A=e.n(N),F=e(4977),D=e.n(F),p=e(78796),$=e.n(p),K=e(41553),M=e.n(K),U=e(49488),V=e.n(U),J=e(84047),Y=e.n(J),Q=e(10154),X=e.n(Q),w=e(65004),k=function(s){V()(n,s);var a=Y()(n);function n(){var r;return $()(this,n),r=a.call(this,"HashDB"),X()(M()(r),"hash",void 0),r.version(1).stores({hash:"&hash"}),r}return D()(n)}(w.ZP),T=new k,q=function(){var s=L()(g()().mark(function a(){return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:case"end":return r.stop()}},a)}));return function(){return s.apply(this,arguments)}}();T.on("populate",q),window.hashDb=T;var B=e(23825),_=function(){var s=L()(g()().mark(function a(n){var r,i,v,h,f=arguments;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>1&&f[1]!==void 0?f[1]:"img",t.next=3,T.hash.get(n);case 3:if(i=t.sent,i!=null&&i.base64){t.next=14;break}return t.next=7,(0,B.I)({path:"hash/".concat(r,"/").concat(n),autoCreate:!1});case 7:if(v=t.sent,!v.success){t.next=13;break}return h=v.data.content,t.next=12,T.hash.put({hash:n,base64:h});case 12:return t.abrupt("return",{status:200,success:!0,data:h});case 13:return t.abrupt("return",v);case 14:return t.abrupt("return",{status:200,success:!0,data:i.base64});case 15:case"end":return t.stop()}},a)}));return function(n){return s.apply(this,arguments)}}(),ee=function(){var s=L()(g()().mark(function a(n){var r,i,v,h,f;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.hash,i=n.content,v=n.type,h=v===void 0?"img":v,t.next=3,T.hash.get(r);case 3:if(f=t.sent,f!=null&&f.hash){t.next=10;break}return t.next=7,T.hash.put({hash:r,base64:i});case 7:return t.next=9,(0,B.I)({path:"hash/".concat(h,"/").concat(r),content:i,autoCreate:!0});case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return",{status:200,success:!0,data:f.base64});case 11:case"end":return t.stop()}},a)}));return function(n){return s.apply(this,arguments)}}(),I=e(94e3),te=e(87660),l=e(55549),W=e(92030),z=e(9352),ae=e(25138),ne=e(51865),re=e.n(ne),P=e(44194),S=e(31549),m=function(a){return new Promise(function(n,r){var i=new FileReader;i.readAsDataURL(a),i.onload=function(){return n(i.result)},i.onerror=function(v){return r(v)}})},o=function(a){var n=["image/jpeg","image/png","image/svg+xml"].includes(a.type);n||W.ZP.error("You can only upload JPG/PNG/SVG file!");var r=a.size/1024/1024<2;return r||W.ZP.error("Image must smaller than 2MB!"),!1},u=function(a){var n=a.value,r=a.onChange,i=a.onlyPreview,v=a.className,h=(0,P.useState)(!1),f=A()(h,2),E=f[0],t=f[1],d=(0,P.useState)(),ue=A()(d,2),G=ue[0],ie=ue[1],oe=function(){var se=L()(g()().mark(function H(x){var j,O;return g()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!E){y.next=2;break}return y.abrupt("return");case 2:return t(!0),console.log("info",x),y.next=6,m(x.file.originFileObj||x.file);case 6:return j=y.sent,ie(j),y.next=10,(0,l.x5)(j);case 10:return O=y.sent,y.next=13,ee({hash:O,content:j});case 13:r==null||r(O),t(!1);case 15:case"end":return y.stop()}},H)}));return function(x){return se.apply(this,arguments)}}(),ve=(0,S.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[E?(0,S.jsx)(I.Z,{}):(0,S.jsx)(te.Z,{}),(0,S.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,P.useEffect)(function(){var se=function(){var H=L()(g()().mark(function x(){var j;return g()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(n){C.next=2;break}return C.abrupt("return");case 2:return C.next=4,_(n);case 4:j=C.sent,j.success&&ie(j.data);case 6:case"end":return C.stop()}},x)}));return function(){return H.apply(this,arguments)}}();se()},[n]),i?G&&(0,S.jsx)(z.Z,{className:v,src:G,width:32},G):(0,S.jsx)(ae.Z,{name:"avatar",listType:"picture-card",className:re()("avatar-uploader",v),showUploadList:!1,openFileDialogOnClick:!G,beforeUpload:o,onChange:oe,children:G?(0,S.jsx)(z.Z,{src:G}):ve})},c=u},91251:function(le,R,e){e.r(R),e.d(R,{default:function(){return S}});var b=e(45332),g=e.n(b),Z="SITE_LINK_PAGE_SELECT_STORAGE",L=e(85707),N=e(34074),A=e(45977),F=e(92336),D=e(20759),p=e(44194),$=e(89206);function K(m){var o=(0,p.useRef)(0),u=(0,F.CR)((0,p.useState)(m),2),c=u[0],s=u[1],a=(0,p.useCallback)(function(n){cancelAnimationFrame(o.current),o.current=requestAnimationFrame(function(){s(n)})},[]);return(0,$.Z)(function(){cancelAnimationFrame(o.current)}),[c,a]}var M=K,U=e(89934),V=e(61356),J=e(41682),Y=e(85768),Q=(0,Y.Z)(p.useLayoutEffect),X=Q,w=V.Z?X:J.Z,k=w;function T(m){var o=(0,F.CR)(M(function(){var s=(0,U.n)(m);return s?{width:s.clientWidth,height:s.clientHeight}:void 0}),2),u=o[0],c=o[1];return k(function(){var s=(0,U.n)(m);if(s){var a=new D.Z(function(n){n.forEach(function(r){var i=r.target,v=i.clientWidth,h=i.clientHeight;c({width:v,height:h})})});return a.observe(s),function(){a.disconnect()}}},[],m),u}var q=T,B=e(65236),_=e(39393),ee=e(41860),I=e(17433),te=e(11836),l=e(31549),W=function(o){var u=o.data;return(0,l.jsxs)("div",{className:"px-4 py-3 text-zinc-800 bg-white rounded-lg flex items-center cursor-pointer",title:u.title,children:[(0,l.jsx)("div",{className:"flex-none overflow-hidden rounded-full",children:(0,l.jsx)(te.Z,{onlyPreview:!0,value:u.icon})}),(0,l.jsx)("a",{className:"ml-1 flex-1 overflow-hidden",href:u.url,target:"_blank",rel:"noreferrer",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"font-semibold hover:text-rose-400 truncate",children:u.title}),(0,l.jsx)("div",{className:"text-xs truncate",children:u.subTitle||u.title})]})})]})},z=W,ae=[16,16],ne=function(){var o=(0,p.useRef)(null),u=(0,I.yR)(function(){return N.q.group.toArray().then(function(t){return t.map(function(d){return{value:d.id,label:d.title}})})},[]),c=q(o),s=(0,p.useState)(8),a=g()(s,2),n=a[0],r=a[1];(0,p.useEffect)(function(){var t=(c==null?void 0:c.width)||0,d=3;t<480?d=1:t<960?d=2:t<1440?d=3:t<1600?d=4:d=6,r(24/d)},[c==null?void 0:c.width]);var i=(0,p.useState)(function(){var t=localStorage.getItem(Z);return console.log("storageStr",t),t?+t:null}),v=g()(i,2),h=v[0],f=v[1];console.log("group",h);var E=function(d){f(d),localStorage.setItem(Z,"".concat(d))};return(0,l.jsx)(A._z,{children:(0,l.jsxs)("div",{ref:o,children:[(0,l.jsx)("div",{children:(0,l.jsx)(B.Z,{className:"min-w-80 mb-8",showSearch:!0,placeholder:"Select a person",optionFilterProp:"label",value:h,onChange:E,options:u})}),h&&(0,l.jsx)(re,{span:n,group:h})]})})},re=function(o){var u=o.group,c=o.span,s=(0,I.yR)(function(){return N.q.tag.orderBy("order").toArray().then(function(n){return n.filter(function(r){return r.group===u})})},[u]),a=(0,I.yR)(function(){return L.O.web.toArray()},[]);return s==null?void 0:s.map(function(n){return(0,l.jsx)(P,{span:c,title:n.title,list:a==null?void 0:a.filter(function(r){return r.tags.includes(n.id)})})})},P=function(o){var u=o.list,c=o.span,s=o.title;return!!(u!=null&&u.length)&&(0,l.jsxs)("div",{className:"pb-6",children:[(0,l.jsx)("div",{className:"text-lg pb-6 text-gray-500",children:s}),(0,l.jsx)(_.Z,{gutter:ae,children:u.map(function(a){return(0,l.jsx)(ee.Z,{span:c,children:(0,l.jsx)(z,{data:a})})})})]})},S=ne}}]);
