"use strict";(self.webpackChunkapps_ant_admin=self.webpackChunkapps_ant_admin||[]).push([[978],{37453:function(ie,x,e){e.d(x,{Z:function(){return m}});var N=e(90819),d=e.n(N),W=e(89933),S=e.n(W),A=e(45332),g=e.n(A),D=e(4977),O=e.n(D),$=e(78796),F=e.n($),b=e(41553),M=e.n(b),V=e(49488),J=e.n(V),Y=e(84047),K=e.n(Y),Q=e(10154),X=e.n(Q),w=e(99338),k=function(s){J()(n,s);var r=K()(n);function n(){var t;return F()(this,n),t=r.call(this,"HashDB"),X()(M()(t),"hash",void 0),t.version(1).stores({hash:"&hash"}),t}return O()(n)}(w.ZP),j=new k,q=function(){var s=S()(d()().mark(function r(){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},r)}));return function(){return s.apply(this,arguments)}}();j.on("populate",q),window.hashDb=j;var v=e(4931),_=function(){var s=S()(d()().mark(function r(n){var t,l,f,C,c=arguments;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=c.length>1&&c[1]!==void 0?c[1]:"img",a.next=3,j.hash.get(n);case 3:if(l=a.sent,l!=null&&l.base64){a.next=14;break}return a.next=7,(0,v.I)({path:"hash/".concat(t,"/").concat(n),autoCreate:!1});case 7:if(f=a.sent,!f.success){a.next=13;break}return C=f.data.content,a.next=12,j.hash.put({hash:n,base64:C});case 12:return a.abrupt("return",{status:200,success:!0,data:C});case 13:return a.abrupt("return",f);case 14:return a.abrupt("return",{status:200,success:!0,data:l.base64});case 15:case"end":return a.stop()}},r)}));return function(n){return s.apply(this,arguments)}}(),ee=function(){var s=S()(d()().mark(function r(n){var t,l,f,C,c;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=n.hash,l=n.content,f=n.type,C=f===void 0?"img":f,a.next=3,j.hash.get(t);case 3:if(c=a.sent,c!=null&&c.hash){a.next=10;break}return a.next=7,j.hash.put({hash:t,base64:l});case 7:return a.next=9,(0,v.I)({path:"hash/".concat(C,"/").concat(t),content:l,autoCreate:!0});case 9:return a.abrupt("return",a.sent);case 10:return a.abrupt("return",{status:200,success:!0,data:c.base64});case 11:case"end":return a.stop()}},r)}));return function(n){return s.apply(this,arguments)}}(),ae=e(94e3),te=e(87660),ne=e(37138),G=e(79044),R=e(60416),y=e(8010),h=e(51865),i=e.n(h),o=e(44194),u=e(31549),T=function(r){return new Promise(function(n,t){var l=new FileReader;l.readAsDataURL(r),l.onload=function(){return n(l.result)},l.onerror=function(f){return t(f)}})},I=function(r){var n=["image/jpeg","image/png","image/svg+xml"].includes(r.type);n||G.ZP.error("You can only upload JPG/PNG/SVG file!");var t=r.size/1024/1024<2;return t||G.ZP.error("Image must smaller than 2MB!"),!1},U=function(r){var n=r.value,t=r.onChange,l=r.onlyPreview,f=r.className,C=(0,o.useState)(!1),c=g()(C,2),B=c[0],a=c[1],le=(0,o.useState)(),se=g()(le,2),z=se[0],ue=se[1],oe=function(){var re=S()(d()().mark(function E(P){var L,H;return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!B){p.next=2;break}return p.abrupt("return");case 2:return a(!0),console.log("info",P),p.next=6,T(P.file.originFileObj||P.file);case 6:return L=p.sent,ue(L),p.next=10,(0,ne.x5)(L);case 10:return H=p.sent,p.next=13,ee({hash:H,content:L});case 13:t==null||t(H),a(!1);case 15:case"end":return p.stop()}},E)}));return function(P){return re.apply(this,arguments)}}(),ve=(0,u.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[B?(0,u.jsx)(ae.Z,{}):(0,u.jsx)(te.Z,{}),(0,u.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,o.useEffect)(function(){var re=function(){var E=S()(d()().mark(function P(){var L;return d()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(n){Z.next=2;break}return Z.abrupt("return");case 2:return Z.next=4,_(n);case 4:L=Z.sent,L.success&&ue(L.data);case 6:case"end":return Z.stop()}},P)}));return function(){return E.apply(this,arguments)}}();re()},[n]),l?(0,u.jsx)(R.Z,{className:f,src:z,width:32}):(0,u.jsx)(y.Z,{name:"avatar",listType:"picture-card",className:i()("avatar-uploader",f),showUploadList:!1,openFileDialogOnClick:!z,beforeUpload:I,onChange:oe,children:z?(0,u.jsx)(R.Z,{src:z}):ve})},m=U},94527:function(ie,x,e){e.r(x),e.d(x,{default:function(){return R}});var N=e(45332),d=e.n(N),W=e(63969),S=e(94154),A=e(20759),g=e(44194),D=e(89206);function O(y){var h=(0,g.useRef)(0),i=(0,S.CR)((0,g.useState)(y),2),o=i[0],u=i[1],T=(0,g.useCallback)(function(I){cancelAnimationFrame(h.current),h.current=requestAnimationFrame(function(){u(I)})},[]);return(0,D.Z)(function(){cancelAnimationFrame(h.current)}),[o,T]}var $=O,F=e(89934),b=e(61356),M=e(41682),V=e(85768),J=(0,V.Z)(g.useLayoutEffect),Y=J,K=b.Z?Y:M.Z,Q=K;function X(y){var h=(0,S.CR)($(function(){var u=(0,F.n)(y);return u?{width:u.clientWidth,height:u.clientHeight}:void 0}),2),i=h[0],o=h[1];return Q(function(){var u=(0,F.n)(y);if(u){var T=new A.Z(function(I){I.forEach(function(U){var m=U.target,s=m.clientWidth,r=m.clientHeight;o({width:s,height:r})})});return T.observe(u),function(){T.disconnect()}}},[],y),i}var w=X,k=e(34763),j=e(42482),q=e(37453),v=e(31549),_=function(h){var i=h.data;return(0,v.jsx)("a",{href:"",target:"_blank",rel:"noreferrer",children:(0,v.jsxs)("div",{className:"px-4 py-3 text-zinc-800 bg-white rounded-lg flex items-center cursor-pointer",title:i.title,children:[(0,v.jsx)(q.Z,{onlyPreview:!0,value:i.icon,className:"flex-none overflow-hidden rounded-full"}),(0,v.jsxs)("div",{className:"ml-1 flex-1 overflow-hidden",children:[(0,v.jsx)("div",{className:"font-semibold hover:text-rose-400 truncate",children:i.title}),(0,v.jsx)("div",{className:"text-xs truncate",children:i.subTitle||i.title})]})]})})},ee=_,ae=e(34825),te=e(16493),ne=[16,16],G=function(){var h=(0,g.useRef)(null),i=(0,ae.yR)(function(){return te.O.web.toArray()},[]),o=w(h);console.log("size",o);var u=(0,g.useState)(8),T=d()(u,2),I=T[0],U=T[1];return(0,g.useEffect)(function(){var m=(o==null?void 0:o.width)||0,s=3;m<480?s=1:m<960?s=2:m<1440?s=3:m<1600?s=4:s=6,U(24/s)},[o==null?void 0:o.width]),(0,v.jsx)(W._z,{children:(0,v.jsx)("div",{ref:h,children:(0,v.jsx)(k.Z,{gutter:ne,children:i==null?void 0:i.map(function(m){return(0,v.jsx)(j.Z,{span:I,children:(0,v.jsx)(ee,{data:m})})})})})})},R=G}}]);
